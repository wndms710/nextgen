# CTI Solver Suite Version 22.0.0

New features and fixes available in this release are described in the [What's New](https://support.cascadetechnologies.com/posts/documentations) section of the Knowledge Base (links to external site).

General information about the source code and solvers are described below that in the Solvers section.

-----------

# Solvers

The primary Cascade solvers included in this repository are:

## Surfer

Surface manipulation, repair, and preparation utility. The
primary use for Surfer is to prepare triangulated surfaces for
meshing. In this regard there are features which allow the user to:
 - diagnose & repair the surface,
 - modify the zone definitions,
 - transform the geometry of the surface,
 - generate template input files for downstream solvers,
 - specify periodicity (a surface property now),
 - export parts or all of the surface.

Much of the functionality of surfer is controlled through the
Cascade App (distributed separately), though it can still be controlled
using an input file.

## Stitch

A fast, scalable, and Voronoi-based mesh generator. This thing eats complex
geometries for breakfast, lunch, and dinner. And dessert too, I suppose.

## Charles

Powerful large-eddy simulation solver designed to work exclusively on the grids
generated by Stitch. Can be used to investigate compressible reacting and non-
reacting flows.

------------
# Compiling the Solvers

The solvers are compiled by issuing the command `make` after creating a system specific `Makefile.in` file in this toplevel directory. Examples may be found in the `makefiles/` folder. A description of the required keywords is presented below.

## External Libraries

The libpng image library and zlib compression library are required for image writing from Cascade’s solvers:
  * libpng - version 1.2 or later
  * zlib   - version 1.2.8 or later

Keyword  |Description
:--------|:------------
`PNG_INC`| specify the path to png and zlib header files
`PNG_LIB`| specify the path to png and zlib libraries

### Example

    PNG_INC = -I/usr/include/libpng -I/usr/include/zlib
    PNG_LIB = -L/usr/lib/ -lpng -L/usr/lib -lz

## Archiving tools
These commands are used to prepare libraries from compiled object files.

Keyword  |Description
:--------|:------------
`AR`     | specify the command for creating static libraries
`EXTRACT`| specify the command for extracting object files from static libraries
`RANLIB` | specify the command for indexing an archive

### Example
    AR      = ar rv
    EXTRACT = ar -x
    RANLIB  = ar -ts

## Parallel Compiler
  A parallel compiler must be specified to build charles and stitch.  A number of additional flags are recommended.  The above mentioned external libraries must also be included.

Keyword            |Description
:------------------|:------------
`CXX`              | specify a parallel MPI c++ compiler
`STITCH_OPT_FLAGS` | specify an optimization level for stitch (O2 recommended)
`CHARLES_OPT_FLAGS`| specify an optimization level for charles (fast or O3 recommended)
`CORE_OPT_FLAGS`   | specify an optimization level for the core library (fast or O3 recommended)
`CLIBS`            | specify external libraries
`CXXFLAGS`         | specify header files for external libraries and flags for the parallel c++ compiler

There are several required Cascade specific `CXXFLAGS`, these are described below:

Cascade Flag   | Description
:--------------|:-----------
`WITH_PNG`     | required for image writing
`CTI_VERBOSE3` | required for logging
`WITH_SHM`     | required for nodal shared memory management

### Example
    CXX               = mpicxx
    STITCH_OPT_FLAGS  = -O2
    CHARLES_OPT_FLAGS = -Ofast
    CORE_OPT_FLAGS    = -Ofast
    CXXFLAGS          = -DWITH_SHM —DCTI_VERBOSE3 -DWITH_PNG $(PNG_INC)
    CLIBS             = $(PNG_LIB)

## Serial Compiler
A serial compiler must be specified to build surfer, lesinfo and ping_s. A number of additional flags are recommended.  The above mentioned external libraries must also be included.

Keyword          |Description
:----------------|:------------
`CXX_NO_MPI`     | specify a serial c++ compiler
`CLIBS_NO_MPI`   | specify external libraries (similar to CLIBS)
`CXXFLAGS_NO_MPI`| specify optimization level (fast or O3 recommended), external library header files and flags for serial tools (similar to CXXFLAGS)

There are several required Cascade specific `CXXFLAGS_NO_MPI`, these are described below:

Cascade Flag   | Description
:--------------|:-----------
`WITH_PNG`     | required for image writing
`CTI_VERBOSE3` | required for logging

### Example
```
CXX_NO_MPI      = g++
CXXFLAGS_NO_MPI = -Ofast -DCTI_VERBOSE3 -DWITH_PNG $(PNG_INC)
CLIBS_NO_MPI    = $(PNG_LIB)
```
